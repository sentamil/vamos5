<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="Satheesh">
<title>GPS</title>
<link rel="shortcut icon" href="assets/imgs/tab.ico">
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/simple-sidebar.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/popup.bootstrap.min.css">
<link href="assets/font-awesome-4.2.0/css/font-awesome.css" rel="stylesheet">
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<style type="text/css">
     #map_canvas{ width:100%; height:100%;}  
     #container-speed{  width: 240px; height: 120px;}

     [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
        display: none !important;
     }
</style>
</head>
<div id="preloader" >
    <div id="status">&nbsp;</div>
</div>
<div id="preloader02" >
    <div id="status02">&nbsp;</div>
</div>
<body ng-app="mapApp">
<div ng-controller="mainCtrl">
   <div id="wrapper">
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand"><a href="javascript:void(0);"><img id="imagesrc" src=""/></i></a>

                </li>
                <li class="track"><a href="javascript:void(0);" class="active"><div></div><label>Track</label></a></li>
                <li class="history"><a href="../public/replay"><div></div><label>History</label></a></li>
                <li class="alert01"><a href="../public/reports"><div></div><label>Reports</label></a></li>
                <li class="stastics"><a href="../public/statistics"><div></div><label>Statistics</label></a></li>
                <li class="admin"><a href="../public/fuel"><div></div><label>Fuel</label></a></li>
                <li><a href="../public/logout"><img src="assets/imgs/logout.png"/></a></li>         
            </ul>
            <ul class="sidebar-subnav" style="max-height: 100vh; overflow-y: auto;" ng-init="vehicleStatus='ALL'">
                <li style="margin-bottom: 15px;"><div class="right-inner-addon" align="center"><i class="fa fa-search"></i><input type="search" class="form-control" placeholder="Search" ng-model="searchbox" name="search" /></div>
                <select ng-model="vehicleStatus" style="width:127px; margin-top: 5px; font-size: 12px;" ng-cloak>
                    <option value="ALL">All ({{totalVehicles}})</option>
                    <option value="ON">ON ({{vehicleOnline}})</option>
                    <option value="OFF">OFF ({{attention}})</option>
                    <option value="P">Parked ({{parkedCount}})</option>
                    <option value="M">Moving ({{movingCount}})</option>
                    <option value="S">Idle ({{idleCount}})</option>
                    <option value="O">Overspeed ({{overspeedCount}})</option>
                </select>
                </li>
                <li ng-repeat="location in locations02"><a href="javascript:void(0);" ng-click="groupSelection(location.group, location.rowId)" ng-cloak >{{trimColon(location.group)}}</a>
                    <ul class="nav nav-second-level" style="max-height: 400px; overflow-y: auto;">
                        <li ng-repeat="loc in location.vehicleLocations | statusfilter:vehicleStatus | filter:searchbox " ng-class="{active:selected==$index}"><a href="javascript:void(0);" ng-class="{red:loc.status=='OFF'}" ng-click="genericFunction(loc.vehicleId, $index)" ng-cloak><img ng-src="assets/imgs/{{loc.vehicleType}}.png" fall-back-src="assets/imgs/Car.png" width="16" height="16"/>{{loc.shortName}}</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div style="position: absolute;top: 0px;left: 20%; z-index:999999;" id="testLoad"></div>
                        <div class="topContent" style="visibility: hidden">
                            <div class="row">
                                <div class="col-md-2" align="center" id="totalvehicles">
                                    <h6 ng-cloak>Total Vehicles - <span>( {{totalVehicles}} )</span></h6>
                                </div>
                                <div class="col-md-6 col-lg-2">
                                    <h6 ng-cloak>Vehicles Online - <span>( {{vehicleOnline}} )</span></h6>
                                </div>
                                <div class="col-md-2" id="totalalerts">
                                    <h6 ng-cloak>Alarms - <span>( {{alertstrack}} )</span></h6>
                                </div>
                                <div class="col-md-2" id="totalAttention">
                                    <h6 ng-cloak>Attention - <span>( {{attention}} )</span></h6>
                                </div>
                                <div class="col-md-6 col-lg-4">
                                    <h6 ng-cloak>Overall Distance <span>( {{distanceCovered}} Km)</span></h6>
                                </div>
                            </div>
                        </div>
                        <div id="minmax">
                            <img src="assets/imgs/add.png" />
                        </div>
                        <div id="menuView">

                            <!-- Side Menu -->
                            <table>
                                <tr>
                                    <td>
                                        <div id="viewMap">
                                             <span title="List and Maps" id="listImg" ng-click="mapView('listMap')"><img src="assets/imgs/lis.png" /></span>
                                            <span title="Home" id="homeImg" ng-click="mapView('tablefull')"><img src="assets/imgs/back.png" /></span>
                                        </div>
                                    </td>
                                </tr>
                               <!--  <tr>
                                    <td>
                                        <div title="Live Details" id="viewMap"><img id="minmax" src="assets/imgs/ply.png" /></div>
                                    </td>
                                </tr> -->
                                <tr>
                                    <td>
                                        <div title="Maps Marker Details" id="viewMap"><img id="minmaxMarker"  src="assets/imgs/i.png" /></div>
                                    </td>
                                </tr>
                                <!-- <tr>
                                    <td>
                                        <div title="Near by Vehicles" id="viewMap" ng-click="nearBy();"><img src="assets/imgs/near.png" />
                                        
                                    </td>
                                </tr> -->
                                <tr>
                                    <td>
                                        <div id="viewMap">
                                            <span title="Cluster Marker" id="cluster" ng-click="mapView('cluster')"><img src="assets/imgs/group.png" /></span>
                                            <span title="Spread Marker" id="single" ng-click="mapView('single')"><img src="assets/imgs/single.png" /></span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div id="viewMap" title="Full Screen">
                                           <span id="fullscreen" ng-click="mapView('fscreen')"><img id="minmaxMarker"  src="assets/imgs/full.png" /></span>
                                            <span title="Exit FullScreen" id="efullscreen" ng-click="mapView('escreen')"><img src="assets/imgs/exit_full.png" /></span>
                                        </div>
                                    </td>
                                </tr>   
                                <tr>
                                    <td>
                                        <div style="padding: 5px 1px 5px 1px; cursor:pointer;">
                                            <span ng-click="mapView('home')">
                                                <img src="assets/imgs/hom.png" />
                                            </span>
                                            
                                        </div>
                                    </td>
                                </tr>
                            </table>    
                            
                            
                            

                            
                        </div>
                        <!-- <div id="minmaxMarker" style="position: absolute;top: 10px;left: 120px; z-index:999999" title="Maps Marker Details">
                            <img src="assets/imgs/add.png" /> <a href="../public/liveTrack" id="fullscreen" target="_blank"><img id="minmaxMarker"  src="assets/imgs/full.png" /></a>
                        </div> -->
                        <div id="draggable">
                               <div class="legendlist">
                                    <h3><b>Vehicle Status</b></h3>
                                    <div>
                                        <table cellpadding="0" cellspacing="0">
                                            <tbody>
                                                <tr>
                                                    <td>Moving</td>
                                                    <td><img src="assets/imgs/green.png"/></td>
                                                    <td>Standing</td>
                                                    <td><img src="assets/imgs/orange.png"/></td>
                                                </tr>
                                                 <tr>
                                                    <td>Parked</td>
                                                    <td><img src="assets/imgs/flag.png"/></td>
                                                    <td>Geo Fence</td>
                                                    <td><img src="assets/imgs/blue.png"/></td>
                                                </tr>
                                                 <tr>
                                                    <td>Overspeed</td>
                                                    <td><img src="assets/imgs/red.png"/></td>
                                                    <td>No Data</td>
                                                    <td><img src="assets/imgs/gray.png"/></td>
                                                </tr>
                                        </table>
                                    </div>
                                </div>
                        </div>

                        <div id="contentmin" class="rightsection">
                               <input type="button" id="traffic" ng-click="check()" value="Traffic" />
                               <input type="button" value="Measure" id="pac-input02" ng-click="distance();"/>
                               <input type="text" id="distanceVal" value="0" disabled/> <span style="font-size:12px;">Kms</span>
                               <div style="width:100%; background: #F4F4F4; font-weight: bold; font-size: 12px; padding : 3px" align="center">Live Tracking <div id="google_translate_element"></div></div>
                               <div>
                                
                              
                               
                               <select ng-model="days1" style="width:100%; font-weight: bold; font-size: 12px; padding : 3px">
                                    <option value = "0">Vehicle Id</option>
                                    <option ng-repeat="vehi in vehicle_list" value="{{vehi.vehiID}}">{{vehi.vName}}</option>
                                </select>
                                <div style="width:100%; background: #F4F4F4; font-weight: bold; font-size: 12px; padding : 3px">
                                <select id="Days" ng-model="days" style="height: 18px;">
                                    <option value = "0">Days</option>
                                    <option value = "1">1</option>
                                    <option value = "2">2</option>
                                    <option value = "3">3</option>
                                    <option value = "4">4</option>
                                    <option value = "5">5</option>
                                    <option value = "6">6</option>
                                    <option value = "7">7</option>
                                    <option value = "8">8</option>
                                    <option value = "9">9</option>
                                    <option value = "10">10</option>
                                </select>
                                <input type="button" id="traffic" data-toggle="modal" data-target="#myModal" ng-click="check()" value="Get Url" />
                                <!-- <button type="button" data-toggle="modal" data-target="#myModal" style="height: 19px; background: #3398ff; color: #ffffff; border-radius: 5px">Get Url</button> -->
                                <!-- <a href="../public/liveTrack" id="fullscreen" target="_blank">Full Screen</a> -->
                               <!--  <a ng-href= "#"  target="myModal">Get Url</a> -->
                                <!-- ng-click="clicked(days1, days)" -->
                                </div>

                                <div class="modal fade" id="myModal" role="dialog">
                                    <div class="modal-dialog modal-lg">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                         <div class="form-group">
                                              <label for="mail">Mail Id:</label>
                                              <input type="text" class="form-control" id="mail">
                                            
                                              <label for="phone">Phone No:</label>
                                              <input type="text" class="form-control" id="phone">
                                            </div>
                                        </div>
                                        
                                        <div class="modal-footer">
                                          <button type="button" ng-click="getMailIdPhoneNo(days1, days)" class="btn btn-default" data-dismiss="modal">Submit</button>
                                           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>

                               </div>
                               <div class="nearbyTable">
                                <h3>NearBy Vehicles <a href="#" style="position:absolute; top:10px; right:10px;" ng-click="nearBy();">X</a></h3>
                                <h5 ng-cloak>Your Place - {{nearbyLocs.fromAddress}}</h5>   
                                <div>
                                    <table cellpadding="0" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th style="width:30%;">Vehicle Name</th>
                                                <th style="width:30%;">Distance</th>
                                                <th style="width:40%;">Address</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="nearbyLoc in nearbyLocs.vehicleDetails">
                                                <td ng-cloak>({{nearbyLoc.shortName}})</td>
                                                <td align="right" ng-cloak>{{nearbyLoc.distance}}</td>
                                                <td ng-cloak>{{nearbyLoc.address}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                               <div class="dynamicvehicledetails" ng-init="dynamicvehicledetails1=false" ng-if="dynamicvehicledetails1==true">
                                <div id="viewable">
                                    <h3 id="vehiid"><span id="val"></span> Details <input id="inputEdit" type="button" value="Edit"/></h3>
                                    
                                    <div>
                                        <table cellpadding="0" cellspacing="0">
                                            <tbody>
                                                <tr>
                                                    <td>Odo Reading</td>
                                                    <td id="vehdevtype"><span id="val"></span> kms</td>
                                                    
                                                </tr>
                                                 <tr>
                                                    <td>Speed Limit</td>
                                                    <td id="mobno"><span id="val"></span> km/h</td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td><span></span> Driver Name</td>
                                                    <td id="driverName"><span id="val"></span></td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td>Today Distance</td>
                                                    <td id="toddist"><span id="val"></span> kms</td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td id="positiontime"><span></span> Time</td>
                                                    <td id="regno"><span id="val"></span></td>
                                                    
                                                </tr>
                                        </table>
                                    </div>
                                </div>

                                <div id="editable">
                                    <h3 id="vehiid"><input id="val_veh" type="input" ng-model="vehShort"/> Details <input id="inputEdit" type="button" value="Update" ng-click="updateDetails()"/></h3>
                                    
                                    <div>
                                        <table cellpadding="0" cellspacing="0">
                                            <tbody>
                                                <tr>
                                                    <td>Odo Reading</td>
                                                    <td id="vehdevtype"><input id="val" type="input" ng-model="ododis"/> kms</td>
                                                    
                                                </tr>
                                                 <tr>
                                                    <td>Speed Limit</td>
                                                    <td id="mobno"><input id="val" type="input" ng-model="spLimit"/> km/h</td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td><span></span> Driver Name</td>
                                                    <td id="driverName"><input id="val" type="input" ng-model="driName"/></td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td>Today Distance</td>
                                                    <td id="toddist"><span id="val"> kms</span></td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td id="positiontime"><span></span> Time</td>
                                                    <td id="regno"><span id="val"></span></td>
                                                </tr>
                                        </table>
                                    </div>
                                </div>
                                    <div id="rightAddress">
                                        <h3>Address</h3>
                                        <div align="center" id="lastseen"></div>
                                    </div>
                                    <h3>Last Seen Date & Time</h3>
                                    <div align="center" id="lstseendate">
                                       
                                    </div>
                                    <div id="container-speed"></div>
                                    <h3>Support details</h3>
                                    <div align="center" style="word-wrap: break-word;"><p>{{support}}</p></div>
                                </div>
                        </div>
                        <a href="javascript:void(0);" class="contentexpand"><img src="assets/imgs/add.png"/></a>
                        <div>
                            <div id="maploc">
                                <map id="map_canvas" style="height:100vh; width:100%;"></map>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="mapTable-mapList">
            <div id="flexcolor">
                <div style="float: left; width: 50%; ">
                    <div style=" width: 40px; height: 40px; background-color: #858585; cursor: pointer" ng-click="mapView('home')">
                        <img src="assets/imgs/arrowback.png"/>
                    </div>
                </div>
                <div style="text-align: center;"><h5><b>Current Vehicle Details</b></h5> </div>
                
            </div>
            <div id="scrollTable">
                   <table class="table table-striped table-bordered table-condensed table-hover">
                        <tr style="text-align:center">
                            <th style="text-align:center;"><div style="width: 100px;">Vehicle Name</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Regn No</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Driver Name</div></th>
                            <th style="text-align:center;"><div style="width: 70px;">Position</div></th>
                            <th style="text-align:center;"><div style="width: 70px;">GPS</div></th>
                            <th style="text-align:center;"><div style="width: 70px;">Ignition</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Load</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Fuel Litre</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Temperature</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Hire Status</div></th>
                            <th style="text-align:center;"><div style="width: 100px;">Last Seen</div></th>
                            <th style="text-align:center;"><div style="width: 50px;">KM</div></th>
                            <th style="text-align:center;"><div style="width: 70px;">Speed</div></th>
                            <th style="text-align:center;"><div style="width: 300px;">Nearest Location</div></th>
                            <th style="text-align:center;"><div style="width: 70px;">G-Link</div></th>
                            <th></th>
                        </tr>
                        <tr ng-repeat="user in mapTable" style="text-align:center; cursor: pointer" ng-mouseover="mouseJump(user)" ng-click="tabletd(user)">
                            <td>{{user.shortName}}</td>
                            <td>{{user.regNo}}</td>
                            <td>{{user.driverName}}</td>
                            <td ng-switch on="user.position">
                                <span ng-switch-when="S"><img title="Vehicle Standing" src="assets/imgs/orange.png"/></span>
                                <span ng-switch-when="M"><img title="Vehicle Moving" src="assets/imgs/green.png"/></span>
                                <span ng-switch-when="P"><img title="Vehicle Parked" src="assets/imgs/flag.png"/></span>
                                <span ng-switch-when="U"><img title="Vehicle NoData" src="assets/imgs/gray.png"/></span>
                            </td>
                            <td ng-switch on="user.status">
                                <span ng-switch-when="OFF"><img title="GPS OFF" src="assets/imgs/gof.png"/></span>
                                <span ng-switch-when="ON"><img title="GPS ON" src="assets/imgs/gon.png"/></span>
                            </td>
                            <td ng-switch on="user.ignitionStatus">
                                <span ng-switch-when="OFF"><img src="assets/imgs/no.png"/></span>
                                <span ng-switch-when="ON"><img src="assets/imgs/yes.png"/></span>
                                          
                            </td>
                            <td>{{valueCheck(user.totalTruck)}}</td>
                            <td>{{valueCheck(user.fuelLitre)}}</td>
                            
                            <td>--</td>
                            <td ng-switch on="user.vehicleBusy">
                                <span ng-switch-when="yes" style="color: #ff0045">Busy</span>
                                <span ng-switch-when="no" style="color: #00ce2f">Available</span>
                            </td>
                            <td>{{user.lastSeen}}</td>
                            <td>{{user.distanceCovered}}</td>
                            <td>{{user.speed}}</td>
                            
                            <td ng-click="address_click(user, $index)">{{user.address}}</td>
                            <td><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td>
                            <!-- <td style="cursor: pointer;" get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && mainlist[$index]==null">Click Me</td>
                            <td style="cursor: pointer;" ng-if="user.address==null && mainlist[$index]!=null">{{mainlist[$index]}}</td>
                            <td><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td> -->                                                      
                        </tr>
                    </table>        
                </div>
        </div>
    </div>
   <!--  <div ng-show="true">aasd {{support}}
        <div id="maploc">
            <map id="map_canvas" style="height:100vh; width:100%;"></map>
        </div>
    </div> -->
    
    
</div>
    <div class="modal fade" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Near By Vehicles</h4>
          </div>
          <div class="modal-body">
            <p>click location you want to find nearby Vehicles</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
          </div>
        </div>
      </div>
    </div>
    <script src="assets/js/static.js"></script>
    <script src="assets/js/jquery-1.11.0.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/highcharts-more.js"></script>
    <script src="http://code.highcharts.com/modules/solid-gauge.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places" type="text/javascript"></script>
   <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js" type="text/javascript"></script>
    <script src="assets/js/markerwithlabel.js"></script>
    <script src="assets/js/infobubble.js"  type="text/javascript"></script>
    <script src="assets/js/infobox.js"  type="text/javascript"></script>
    <script src="assets/js/vamoApp.js"></script>
    <script src="assets/js/services.js"></script>
    <script src="assets/js/custom.js"></script>
    <script>
    


    function googleTranslateElementInit() 
    {
         new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
    }

    //menu loading
    $("#testLoad").load("../public/menu");
    var logo =document.location.host;
    var imgName= '/vamo/public/assets/imgs/'+logo+'.small.png';
    $('#imagesrc').attr('src', imgName);

    $(document).ready(function(){
        $('#minmax').click(function(){
            $('#contentmin').animate({
                height: 'toggle'
            },500);
        });
    });

    $("#editable").hide();
    $("#viewable").show();

    $(document).ready(function(){
      //  $('#minmaxMarker').click
        $('#draggable').hide(0);  //or do it through css
        $('#minmaxMarker').click(function(){
             //$('#draggable').toggled();
              $('#draggable').animate({
                height: 'toggle'
            },500);
        });
    

    });
    $("#inputEdit").click(function(e){
        $("#editable").show();
        $("#viewable").hide();
    })
    
    
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    $(document).ready(function(){
        if(navigator.appVersion.indexOf("MSIE")!=-1){
            document.body.style.zoom="90%";
        }
    });

   
    
 
    </script>
</body>
</html>
