<!--<a href="../public/settings">-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="Satheesh">
<title>GPS</title>
<link rel="shortcut icon" href="assets/imgs/tab.ico">
<link href="../app/views/reports/AdminLTE/AdminLTE.css" rel="stylesheet">
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="../app/views/reports/datepicker/bootstrap-datetimepicker.css" rel="stylesheet" type="text/css">
<link href="assets/css/simple-sidebar.css" rel="stylesheet">
<link href="assets/font-awesome-4.2.0/css/font-awesome.css" rel="stylesheet">

</head>
<div id="preloader" >
    <div id="status">&nbsp;</div>
</div>
<div id="preloader02" >
    <div id="status02">&nbsp;</div>
</div>
<style>
	/*.box > .loading-img {
z-index: 1020;
background: transparent url('assets/imgs/status.gif') 50% 50% no-repeat;
}*/

.table-striped > tbody > tr:nth-child(even) > td, .table-striped > tbody > tr:nth-child(even) > th {
background-color: #ffffff;
}
</style>
<body ng-app="mapApp">
	<div id="wrapper" ng-controller="histCtrl">
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand"><a href="javascript:void(0);"><img id="imagesrc" src=""/></i></a></li>
                <li class="track"><a href="../public/live"><div></div><label>Track</label></a></li>
                <li class="history"><a href="../public/replay"><div></div><label>History</label></a></li>
                <li class="alert01"><a href="../public/reports" class="active"><div></div><label>Reports</label></a></li>
		 		<li class="stastics"><a href="../public/statistics"><div></div><label>Statistics</label></a></li>
                <li class="admin"><a href="../public/fuel"><div></div><label>Fuel</label></a></li>
                <li><a href="../public/logout"><img src="assets/imgs/logout.png"/></a></li>
            </ul>
            <ul class="sidebar-subnav ">
                <li style="padding-left:25px;">
                	<div class="right-inner-addon" align="center"> 
                    <i class="fa fa-search"></i>
                    <input type="search" class="form-control" placeholder="Search" ng-model="searchbox" name="search" />
                    </div>
                </li>
                <li ng-repeat="location in locations" class="active"><a href="javascript:void(0);" ng-click="groupSelection(location.group, location.rowId)">{{trimColon(location.group)}}</a>
                    <ul class="nav nav-second-level" style="max-height: 400px; overflow-y: auto;">
                    <li ng-repeat="loc in location.vehicleLocations | filter:searchbox" ng-class="{active:vehiname ==loc.vehicleId}"><a href="history?vid={{loc.vehicleId}}&vg={{location.group}}" ng-class="{active: $index == selected, red:loc.status=='OFF'}" ng-click="genericFunction(loc.vehicleId, $index)"><img ng-src="assets/imgs/{{loc.vehicleType}}.png" fall-back-src="assets/imgs/Car.png" width="16" height="16"/>{{loc.shortName}}</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div style="position: absolute;top: 0px;left: 40%; z-index:999999;" id="testLoad"></div>
        <div id="page-content-wrapper">
            <div class="container-fluid">
            	<div class="panel panel-default">
            	</div>   		
        	</div>
        <!-- /#page-content-wrapper -->
    	</div>
 
    <!-- AdminLTE css box-->
   
       <div class="col-md-12">
	       	<div class="box box-primary">
		        <div class="box-header" data-toggle="tooltip" title="" data-original-title="Header tooltip">
		            <h3 class="box-title">History Reports </h3>
		            <div class="box-tools pull-right">
                               <span class="pull-right"><a href="reports"><input class="btn btn-xs btn-danger pull-right" type="button" value="Reports"></a></span>        
                    </div>
		            <div ng-hide="true" class="box-tools pull-right">
		                <a href="downloadhistory?vid={{id}}&rid={{downloadid}}" target="_blank"><img src="../app/views/reports/image/Adobe.png" /></a>
		                <img style="cursor: pointer;" ng-click="exportData(downloadid)"  src="../app/views/reports/image/xls.png" />
		            </div>
		        </div>
		        <div class="row">
		        				<div class="col-md-1" align="center"></div>
                    			<div class="col-md-2" align="center">
                                	<div class="form-group">
                                    	<div class="input-group datecomp">
                                            <input type="text" ng-model="fromdate" class="form-control placholdercolor" id="dateFrom" placeholder="From date">
                                            <div class="input-group-addon"><i class="fa fa-calendar"></i></div>
                                    	</div>
                                  	</div>
                                </div>
                                <div class="col-md-2" align="center">
                                	<div class="form-group">
                                    	<div class="input-group datecomp">
                                            <input type="text" ng-model="fromtime" class="form-control placholdercolor" id="timeFrom" placeholder="From time">
                                            <div class="input-group-addon"><i class="glyphicon glyphicon-time"></i></div>
                                    	</div>
                                  	</div>
                                </div>
                                <div class="col-md-2" align="center">
                                	<div class="form-group">
                                    	<div class="input-group datecomp">
                                          	<input type="text" min-date="fromdate" ng-model="todate" class="form-control placholdercolor" id="dateTo" placeholder="To date">
                                          	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
                                    	</div>
                                  	</div>
                                </div>
                                <div class="col-md-2" align="center">
                                	<div class="form-group">
                                    	<div class="input-group datecomp">
                                          	<input type="text" ng-model="totime" class="form-control placholdercolor" id="timeTo" placeholder="To time">
                                          	<div class="input-group-addon"><i class="glyphicon glyphicon-time"></i></div>
                                    	</div>
                                  	</div>
                                </div>
                                <div class="col-md-2" align="center">
                                	<div class="form-group">
                                    	<div class="input-group datecomp">
                                          	<select ng-change="intervalChange()" class="input-sm form-control" ng-model="interval">
						                   		 <option value="">Interval</option>
						                   		 <option label="1 mins">1</option>
						                   		 <option label="2 mins">2</option>
						                   		 <option label="5 mins">5</option>
						                   		 <option label="10 mins">10</option>
						                   		 <option label="15 mins">15</option>
						                   		 <option label="30 mins">30</option>
						                   	</select>
						                </div>
                                  	</div>
                                </div>
                                <div class="col-md-1" align="center">
                                    <button ng-click="plotHist()" style="margin-left: -100%;">Submit</button>
                                </div>
                               
                            </div>
		        <div class="box-body" ng-class="overallEnable?'col-md-9':'col-md-12'"id="statusreport">
		        	 <!-- Tabset -->
					 <tabset class="nav-tabs-custom">
					 	<tab select="alertMe('Movement')" heading="Movement" active="tabmovement">
			   				 <p style="margin:0" class="page-header">Movement Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   				 <div id='movementreport' class="box-body table-responsive">
			   				 <table class="table table-bordered table-striped table-condensed table-hover">
			   				 	<thead>
								   	<tr style="text-align:center; font-weight: bold;">
									  	<td colspan="2">Vehicle Group</td>
									  	<td>{{trimColon(vgroup)}}</td>
									  	<td colspan="1">Vehicle Name</td>
									  	<td colspan="3">{{hist.shortName}}</td>					
								  	</tr>
								  	<tr style="text-align:center;font-weight: bold;">
									  	<td colspan="2">Regn No</td>
								       	<td>{{hist.regNo}}</td>
								      	<td colspan="1">Speed Limit</td>
								      	<td colspan="3">{{hist.overSpeedLimit}} Kmph</td>
								    </tr>
								    <tr style="text-align:center;font-weight: bold;">
									  	<td colspan="2">Opening OdoReading</td>
								       	<td>{{hist.openingOdoReading}}</td>
								      	<td colspan="1">Closing OdoReading</td>
								      	<td colspan="3">{{hist.closingOdoReading}}</td>
								    </tr>
								    <tr ng-hide="true" style="text-align:center; font-weight: bold;" >
									  	<td colspan="2"><b>From Date</b></td>
									  	<td>{{fromdate}}</td>
									  	<td colspan="1"><b>From Time</b></td>
									  	<td colspan="3">{{fromtime}}</td>	
								  	</tr>
								  	<tr ng-hide="true" style="text-align:center; font-weight: bold;">
									  	<td colspan="2"><b>To Date</b></td>
								       	<td>{{todate}}</td>
								      	<td colspan="1"><b>To Time</b></td>
								      	<td colspan="3">{{totime}}</td>
								    </tr>
								    <tr><td colspan="7"></td></tr>
									<tr style="text-align:center" >
										<th width="14%" class="id" style="text-align:center;">Date&amp;Time</th>
										<th width="8%" class="id" style="text-align:center;">Speed</th>
										<th width="7%" class="id" style="text-align:center;">G-Map</th>
										<th width="38%" class="id" style="text-align:center;">Nearest Location</th>
										<th width="9%" class="id" style="text-align:center;">Dist</th>
										<th width="15%" class="id" style="text-align:center;">C-Dist (KM)</th>
										<th width="13%" class="id" style="text-align:center;">Odo (KM)</th>

									</tr></thead>
									 
													                
					                <tbody>
									<tr ng-repeat="user in movementdata" class="active" style="text-align:center">
										<td>{{user.lastSeen}}</td>
										<td>{{user.speed}}</td>
										<td><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td>
										<td>
											<p ng-if="user.address!=null">{{user.address}}</p>
											<p get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && maddress1[$index]!=null">{{maddress1[$index]}}</p>
											<p ng-if="user.address==null && maddress1[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
										</td>
										<!-- <td style="cursor: pointer;" get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && maddress[$index]==null">Click Me</td> -->
										<!-- <td get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && maddress1[$index]!=null">{{maddress1[$index]}}</td> -->
										<td>{{user.tmpDistance}}</td>
										<td>{{user.distanceCovered}}</td>
										<td>{{user.odoDistance}}</td>
									</tr>	
									<tr ng-if="movementdata==null">
										<td colspan="7">No Records Found Choose some other date</td>
									</tr>
							</table>
							<!-- <pagination boundary-links="true" max-size="3" items-per-page="itemsPerPage" total-items="movementdata.length" ng-model="currentPage" ng-change="pageChanged()"></pagination>	
							 --></div>
			   			 </tab>
			   			 <tab select="alertMe('Overspeed')" heading="Overspeed" active="taboverspeed">
			   				 <p style="margin:0" class="page-header">Overspeed Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   				 <div class="box-body table-responsive" id='overspeedreport'>
			   				 <table class="table table-bordered table-striped table-condensed table-hover">
			   				 	<thead>
								   	<tr style="text-align:center; font-weight: bold;" >
									  	<td colspan="3"><b>Vehicle Group</b></td>
									  	<td>{{trimColon(vgroup)}}</td>
									  	<td colspan="2"><b>Vehicle Name</b></td>
									  	<td>{{hist.shortName}}</td>	
								  	</tr>
								  	<tr style="text-align:center; font-weight: bold;">
									  	<td colspan="3"><b>Regn No</b></td>
								       	<td>{{hist.regNo}}</td>
								      	<td colspan="2"><b>Speed Limit</b></td>
								      	<td>{{hist.overSpeedLimit}} Kmph</td>
								    </tr>
								    
								    <tr ng-hide="true" style="text-align:center; font-weight: bold;" >
									  	<td colspan="3"><b>From Date</b></td>
									  	<td>{{fromdate}}</td>
									  	<td colspan="2"><b>From Time</b></td>
									  	<td>{{fromtime}}</td>	
								  	</tr>
								  	<tr ng-hide="true" style="text-align:center; font-weight: bold;">
									  	<td colspan="3"><b>To Date</b></td>
								       	<td>{{todate}}</td>
								      	<td colspan="2"><b>To Time</b></td>
								      	<td>{{totime}}</td>
								    </tr>
								    
								    <tr><td colspan="8"></td></tr>
									<tr> 
										<th width="12%" class="id" style="text-align:center;">Date&amp;Time</th>
										<th width="10%" class="id" style="text-align:center;">Speed (Km)</th>
										<th colspan="2" width="18%" class="id" style="text-align:center;">G-Map</th>
										<th width="30%" class="id" style="text-align:center;">Nearest Location</th>
										<th ng-hide="true" class="id" style="text-align:center;">Over Speed</th>
										<th width="12%" class="id" style="text-align:center;">Odo (Km)</th>
										<th width="13%" class="id" style="text-align:center;">Trip (Km)</th>
										<th ng-hide="true" width="10%" colspan="2" class="id" order="''" style="text-align:center;">G-Map</th>
									</tr></thead>
									
									<tr ng-repeat="user in overspeeddata" class="active" style="text-align:center">
										<td>{{user.lastSeen}}</td>
										<td>{{user.speed}}</td>
										<td colspan="2"><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td>
										<td>
											<p ng-if="user.address!=null">{{user.address}}</p>
											<p get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && oaddress[$index]!=null">{{oaddress[$index]}}</p>
											<p ng-if="user.address==null && oaddress[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
										</td>
										<!-- <td style="cursor: pointer;" get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && oaddress[$index]==null">Click Me</td>
										<td get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && oaddress[$index]!=null">{{oaddress[$index]}}</td> -->
										<td ng-hide="true">{{user.isOverSpeed}}</td>
										<td>{{user.odoDistance}}</td>
										<td>{{user.tripDistance}}</td>
										<!-- <td><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td>	 -->					
									</tr>
									<tr ng-if="overspeeddata==null">
										<td colspan="8">No Records Found Choose some other date</td>
									</tr>
								</table>
							</div>
			   			 </tab>
			   			 
			   			 
			   			 
			   			 <tab select="alertMe('Stopped/Parked')" heading="Parked" active="tabparked">
			   				 <p style="margin:0" class="page-header">Stopped/Parked Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   				 <div class="box-body table-responsive" id='stoppedparkingreport'>
			   				 <table class="table table-bordered  table-striped table-condensed table-hover">
			   				 	<thead>
								   	<tr style="text-align:center; font-weight: bold;">
									  	<td colspan="1"><b>Vehicle Group</b></td>
									  	<td>{{trimColon(vgroup)}}</td>
									  	<td colspan="1"><b>Vehicle Name</b></td>
									  	<td colspan="1">{{hist.shortName}}</td>
									  	<!-- <td ng-hide="true" colspan="2"><b>Register No</b></td>
								       	<td ng-hide="true">{{hist.regNo}}</td>	 -->			
								  	</tr>
								  	<tr><td colspan="4"></td></tr>
									<tr style="text-align:center;font-weight: bold;">
										
										<th width="13%" class="id" custom-sort order="'lastSeen'" sort="sort" style="text-align:center;">Parked Time</th>
										<th width="12%" class="id" order="'latitude'" style="text-align:center;">G-Map</th>
										<th width="40%" class="id" order="'address'" style="text-align:center;">Nearest Location</th>
										<th width="15%" class="id" custom-sort order="'parkedTime'" sort="sort" style="text-align:center;">Duration</th>
										<!-- <th width="20%" colspan="2" class="id" custom-sort order="'totalParkedTime'" sort="sort" style="text-align:center;">Total Parked Time</th> -->
									</tr></thead>
									<tbody>
									<tr ng-repeat="user in parkeddata | orderBy:sort.sortingOrder:sort.reverse" class="active" style="text-align:center">
										
										<td>{{user.lastSeen}}</td>
										<td><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td>
										<td> 
											<p ng-if="user.address!=null">{{user.address}}</p>
											<p get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && saddressStop[$index]!=null">{{saddressStop[$index]}}</p>
											<p ng-if="user.address==null && saddressStop[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
										</td>
										<td>{{getParkedCorrectHours(user.parkedTime)}}</td>
									</tr>
									<tr ng-if="parkeddata==null">
										<td colspan="4">No Records Found Choose some other date</td>
									</tr>
									</tbody>								
							</table>
							</div>
			   			 </tab>
			   			 <tab select="alertMe('idlereport')" heading="Idle" active="tabidle">
			   			 	 <p style="margin:0" class="page-header">Idle Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   			 	 <div class="box-body table-responsive" id="idlereport">
			   			 	 	<table class="table table-bordered table-striped table-condensed table-hover">
			   			 	 		<thead>
			   			 	 			<tr style="text-align:center; font-weight: bold;">
				   			 	 			<td>Vehicle Group</td>
										  	<td>{{trimColon(vgroup)}}</td>
										  	<td>Vehicle Name</td>
										  	<td>{{hist.shortName}}</td>	
			   			 	 			</tr>
			   			 	 			<tr><td colspan="4"></td></tr>
			   			 	 			<tr style="text-align:center;font-weight: bold;">
											<th width="13%" class="id" style="text-align:center;">Idle Time</th>
											<th width="10%" class="id" style="text-align:center;">G-Map</th>
											<th width="40%" class="id" style="text-align:center;">Nearest Location</th>
											<th width="15%" class="id" style="text-align:center;">Duration</th>
										</tr>
								</thead>
			   			 	 	<tbody>
			   			 	 		<tr ng-repeat="user in idlereport" class="active" style="text-align:center">
			   			 	 			<td>{{user.lastSeen}}</td>
										<td><a href="https://www.google.com/maps?q=loc:{{user.latitude}},{{user.longitude}}" target="_blank">Link</a></td>
			   			 	 			<td>
			   			 	 				<p ng-if="user.address!=null">{{user.address}}</p>
			   			 	 				<p get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && addressIdle[$index]!=null">{{addressIdle[$index]}}</p>
			   			 	 				<p ng-if="user.address==null && addressIdle[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
			   			 	 			</td>
			   			 	 			<td>{{getParkedCorrectHours(user.idleTime)}}</td>
			   			 	 		</tr>
			   			 	 		<tr ng-if="idlereport==null">
										<td colspan="4">No Records Found Choose some other date</td>
									</tr>
			   			 	 	</tbody>
			   			 	 	</table>
			   			 	</div>
			   				 
			   			 </tab>
			   			 <tab ng-hide="true" select="alertMe('eventReport')" heading="Event" active="tabevent">
			   			 	<p style="margin:0" class="page-header">Event Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   			 	 <div class="box-body table-responsive" id="eventReport">
			   			 	 	<table style="background-color: #cecece; color: #000" class="table table-bordered table-striped table-condensed table-hover">
			   			 	 		<thead>
			   			 	 			<tr>
					   			 	 		<td><label><input type="checkbox"  id="stop"><b> Stoppage </b></label></td>
					   			 	 		<td><label><input type="textbox" id="stop1" style="height: 20px; width:30px; border-radius: 3px" value="10"/><b> (mins) </b></label></td>
					   			 	 		<td><label><input type="checkbox" id="idle"><b> Idle </b></label></td>
					   			 	 		<td><label><input type="textbox" id="idle1" style="height: 20px; width:30px; border-radius: 3px" value="10"/><b> (mins) </b></label></td>
					   			 	 		<td><label><input type="checkbox" id="location" ><b> Location </b></label></td>
					   			 	 	</tr>
					   			 	 	<tr>
					   			 	 		<td><label><input type="checkbox" id="overspeed"><b> Overspeed </b></label></td>
					   			 	 		<td><label><input type="textbox" id="overspeed1" style="height: 20px; width:30px; border-radius: 3px" value="10"/><b> (Km) </b></label></td>
					   			 	 		<td><label><input type="checkbox" id="notreach"><b> NotReachable </b></label><br/></td>
					   			 	 		<td><label><input type="textbox" id="notreach1" style="height: 20px; width:30px; border-radius: 3px" value="10"/><b> (mins) </b></label></td>
					   			 	 		<td><label><input type="checkbox" id="site"><b> Site </b></label>	</td>
					   			 	 	</tr>
					   			 	 	
			   			 	 			
			   			 	 	</table>
			   			 	 	<hr>
			   			 	 	<table class="table table-bordered table-striped table-condensed table-hover">
			   			 	 	<thead>
			   			 	 		<tr style="text-align:center; font-weight: bold;">
				   			 	 			<td>Vehicle Group</td>
										  	<td>{{trimColon(vgroup)}}</td>
										  	<td colspan="2">Vehicle Name</td>
										  	<td>{{hist.shortName}}</td>	
			   			 	 			</tr>
			   			 	 			<tr><td colspan="5"></td></tr>
			   			 	 			<tr style="text-align:center;font-weight: bold;">
											<th width="20%" class="id" style="text-align:center;">Start Time</th>
											<th width="20%" class="id" style="text-align:center;">Duration</th>
											<th colspan="2" width="40%" class="id" style="text-align:center;">Nearest Location</th>
											<th width="20%" class="id" style="text-align:center;">State</th>
										</tr>
								</thead>
			   			 	 	<tbody>
			   			 	 		<tr ng-repeat="user in eventReportData" class="active" style="text-align:center">
			   			 	 			<td>{{user.startTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
										<td>
											<p ng-if="user.duration!=null">{{msToTime(user.duration)}}</p>
											<p ng-if="user.duration==null">--</p>
										</td>
			   			 	 			<td colspan="2">
			   			 	 				<p ng-if="user.address!=null">{{user.address}}</p>
			   			 	 				<p get-location lat={{user.latitude}} lon={{user.longitude}} index={{$index}} ng-if="user.address==null && addressEvent[$index]!=null">{{addressEvent[$index]}}</p>
			   			 	 				<p ng-if="user.address==null && addressEvent[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
			   			 	 			</td>
			   			 	 			<td>{{user.state}}</td>
			   			 	 		</tr>
			   			 	 		<tr ng-if="eventReportData==null">
										<td colspan="5">No Records Found Choose some other date</td>
									</tr>
			   			 	 	</tbody>
			   			 	 	</table>
			   			 	</div>
			   			 </tab>
			   			 <tab ng-hide="true" select="alertMe('sitereport')" heading="Site" active="tabsite">
			   			 	 <p style="margin:0" class="page-header">Site Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   			 	 <div class="box-body table-responsive" id="sitereport">
			   			 	 	<table class="table table-bordered table-striped table-condensed table-hover">
			   			 	 		<thead>
			   			 	 			<tr style="text-align:center; font-weight: bold;">
				   			 	 			<td>Vehicle Group</td>
										  	<td>{{trimColon(vgroup)}}</td>
										  	<td>Vehicle Name</td>
										  	<td>{{hist.shortName}}</td>	
			   			 	 			</tr>
			   			 	 			<tr><td colspan="4"></td></tr>
			   			 	 			<tr style="text-align:center;font-weight: bold;">
											<th width="20%" class="id" style="text-align:center;">Start Time</th>
											<!-- <th width="10%" class="id" style="text-align:center;">G-Map</th> -->
											<th colspan="2" class="id" style="text-align:center;">Nearest Location</th>
											<th width="20%" class="id" style="text-align:center;">State</th>
										</tr>
								</thead>
			   			 	 	<tbody>
			   			 	 		<tr ng-repeat="user in siteReport" class="active" style="text-align:center">
			   			 	 			<td>{{user.startTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
			   			 	 			<td colspan="2">{{user.address}}</td>
										<td>{{user.state}}</td>
			   			 	 		</tr>
			   			 	 		<tr ng-if="siteReport==null">
										<td colspan="4">No Records Found Choose some other date</td>
									</tr>
			   			 	 	</tbody>
			   			 	 	</table>
			   			 	</div>
			   				 
			   			 </tab>
			   			 <tab select="alertMe('loadreport')" heading="Load" active="tabload">
			   			 	<p style="margin:0" class="page-header">Load Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   			 	 <div class="box-body table-responsive" id="loadreport">
			   			 	 	<table class="table table-bordered table-striped table-condensed table-hover">
			   			 	 		<thead>
			   			 	 			<tr style="text-align:center; font-weight: bold;">
				   			 	 			<td>Vehicle Group</td>
										  	<td>{{trimColon(vgroup)}}</td>
										  	<td>Vehicle Name</td>
										  	<td>{{hist.shortName}}</td>	
			   			 	 			</tr>
			   			 	 			<tr><td colspan="4"></td></tr>
			   			 	 			<tr style="text-align:center;font-weight: bold;">
											<th class="id" style="text-align:center;" width="20%">Alert Time</th>
											
											<th class="id" style="text-align:center;" width="20%">Load Truck</th>
											<th ng-hide="true" class="id" style="text-align:center;">Load Trailer</th>
											<th ng-hide="true" class="id" style="text-align:center;">Total Truck</th>
											<th ng-hide="true" class="id" style="text-align:center;">Total Trailer</th>
											<th class="id" style="text-align: center;" width="30%">Nearest Location</th>
											<th width="10%" class="id" style="text-align:center;">G-Map</th>
										</tr>
								</thead>
			   			 	 	<tbody>
			   			 	 		<tr class="active" style="text-align:center" ng-repeat="load in loadreport" ng-if="load.loadTruck!=='nill' && load.loadTrailer!=='nill' && load.totalTruck!=='nill' && load.totalTrailer!=='nill'">
			   			 	 			<td>{{load.date | date:'yyyy-MM-dd HH:mm:ss'}}</td>
			   			 	 			<td>{{load.loadTruck}}</td>
			   			 	 			<td ng-hide="true">{{load.loadTrailer}}</td>
			   			 	 			<td ng-hide="true">{{load.totalTruck}}</td>
			   			 	 			<td ng-hide="true">{{load.totalTrailer}}</td>
										<td>
											<p ng-if="load.address!=null">{{load.address}}</p>
											<p ng-if="load.address==null && addressLoad[$index]!=null">{{addressLoad[$index]}}</p>
											<p ng-if="load.address==null && addressLoad[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
										</td>
										<td><a href="https://www.google.com/maps?q=loc:{{load.latitude}},{{load.longitude}}" target="_blank">Link</a></td>
			   			 	 		</tr>
			   			 	 		<tr>
										<td ng-if="loadreport==null" colspan="4">No Records Found Choose some other date</td>
									</tr>
			   			 	 	</tbody>
			   			 	 	</table>
			   			 	</div>
			   			 </tab>
			   			 <tab heading="Fuel" select="alertMe('fuelreport')" active="tabfuel">
			   			 	<p style="margin:0" class="page-header">Fuel Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   			 	<div style="min-width:700px; max-width:700px; width: 700px; height: 300px" id="container"></div> 
			   			 	<div class="box-body table-responsive" id="fuelreport">
			   			 	 	<table class="table table-bordered table-striped table-condensed table-hover">
			   			 	 		<thead>
			   			 	 			<tr style="text-align:center; font-weight: bold;">
				   			 	 			<td>Vehicle Group</td>
										  	<td>{{trimColon(vgroup)}}</td>
										  	<td>Vehicle Name</td>
										  	<td>{{hist.shortName}}</td>	
			   			 	 			</tr>
			   			 	 			<tr><td colspan="3"></td></tr>
			   			 	 			<tr style="text-align:center;font-weight: bold;">
											<th class="id" style="text-align:center;" width="25%">Date &amp; Time</th>
											<th class="id" style="text-align:center;" width="20%">Fuel (ltr)</th>
											<th class="id" style="text-align: center;" width="35%">Nearest Location</th>
											<th class="id" style="text-align: center;" width="15%">G-Map</th>
										</tr>
								</thead>
			   			 	 	<tbody>
			   			 	 		<tr class="active" style="text-align:center" ng-repeat="fuel in fuelValue">
			   			 	 			<td>{{fuel.date | date:'yyyy-MM-dd HH:mm:ss'}}</td>
			   			 	 			<td>{{fuel.fuelLitre}}</td>
			   			 	 			<td> 
			   			 	 				<p ng-if="fuel.address!=null">{{fuel.address}}</p>
											<p ng-if="fuel.address==null && addressFuel[$index]!=null">{{addressFuel[$index]}}</p>
											<p ng-if="fuel.address==null && addressFuel[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p>
										</td> 
			   			 	 			<td><a href="https://www.google.com/maps?q=loc:{{fuel.latitude}},{{fuel.longitude}}" target="_blank">Link</a></td>
			   			 	 		</tr>
			   			 	 		<tr>
										<td ng-if="fuelValue==null" colspan="4">No Records Found Choose some other date</td>
									</tr>
			   			 	 	</tbody>
			   			 	 	</table>
			   			 	</div>
			   			 </tab>
			   			 <tab heading="Ignition" select="alertMe('ignitionreport')" active="tabignition">
			   			 	<p style="margin:0" class="page-header">Ignition Report <span style="float: right;">From : {{fromdate}} {{fromtime}} - To : {{todate}} {{totime}}</span></p>
			   			 	<div class="box-body table-responsive" id="ignitionreport">
			   			 	 	<table class="table table-bordered table-striped table-condensed table-hover">
			   			 	 		<thead>
			   			 	 			<tr style="text-align:center; font-weight: bold;">
				   			 	 			<td>Vehicle Group</td>
										  	<td>{{trimColon(vgroup)}}</td>
										  	<td>Vehicle Name</td>
										  	<td>{{hist.shortName}}</td>	
			   			 	 			</tr>
			   			 	 			<tr><td colspan="3"></td></tr>
			   			 	 			<tr style="text-align:center;font-weight: bold;">
											<th class="id" style="text-align:center;" width="25%">Date &amp; Time</th>
											<th class="id" style="text-align:center;" width="20%">Status</th>
											<th class="id" style="text-align: center;" width="35%">Nearest Location</th>
											<th class="id" style="text-align: center;" width="15%">G-Map</th>
										</tr>
								</thead>
			   			 	 	<tbody>
			   			 	 		<tr class="active" style="text-align:center" ng-repeat="ignition in ignitionData">
			   			 	 			<td>{{ignition.date | date:'yyyy-MM-dd HH:mm:ss'}}</td>
			   			 	 			<td>{{ignition.ignitionStatus}}</td>
			   			 	 			<td>
			   			 	 			{{ignition.address}} 
			   			 	 				<!-- <p ng-if="ignitionignitionignition.address!=null">{{ignition.address}}</p>
											<p ng-if="ignitionignition.address==null && addressFuel[$index]!=null">{{addressFuel[$index]}}</p>
											<p ng-if="ignition.address==null && addressFuel[$index]==null"><img src="assets/imgs/loader.gif" align="middle"></p> -->
										</td> 
			   			 	 			<td><a href="https://www.google.com/maps?q=loc:{{ignition.latitude}},{{ignition.longitude}}" target="_blank">Link</a></td>
			   			 	 		</tr>
			   			 	 		<tr>
										<td ng-if="ignitionData==null" colspan="4">No Records Found Choose some other date</td>
									</tr>
			   			 	 	</tbody>
			   			 	 	</table>
			   			 	</div>
			   			 </tab>
			   			 


			   			<div class="pull-right">
		                <!-- <a href="downloadhistory?vvid={{id}}&rid={{downloadid}}&fd={{fromdate}}&ft={{fromtime}}&td={{todate}}&tt={{totime}}&dvg={{vgroup}}&interval={{interval}}" target="_blank"><img src="../app/views/reports/image/Adobe.png" /></a> -->
		                <img style="cursor: pointer;" ng-click="exportData(downloadid)"  src="../app/views/reports/image/xls.png" />
		                <img width=30 height=30 style="cursor: pointer;" ng-click="exportDataCSV(downloadid)"  src="../app/views/reports/image/csv.jpeg" />
		            </div>
		    		</tabset>
    		 		<!-- End Tabset -->
    		 		 
		        </div><!-- /.box-body -->
		        <!-- <div ng-show="loading" class="overlay"></div>
		        <div ng-show="loading" class="loading-img"></div> -->
		        <!--<div ng-show="true" class="overlay"></div>
		        <div ng-show="true" class="loading-img"></div> -->
		        <div class="box-body col-md-3" ng-show="overallEnable">
		        	<!-- <div class="small-box bg-aqua">
                        <div class="inner">
                            <h3>{{hist.overSpeedInstances}}</h3>
                            <p>
                            	<b> Overspeed Instances </b>
                            </p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                        </div>
                    </div> -->
                            
                    <div class="small-box bg-green">
                        <div class="inner">
                            <h4>
                                {{hist.topSpeed}} &nbsp; {{topspeedtime}}
                            </h4>
                            <p><b><a style="color: white;" href="https://www.google.com/maps?q=loc:{{hist.topSpeedGeoLocation}}" target="_blank"><u>Topspeed</u></a></b>
                                
                            </p>
                            
                        </div>
                       <div class="icon">
                            <i class="ion ion-speedometer"></i>
                        </div>
                    </div>
                            
                     <div class="small-box bg-yellow">
                        <div class="inner">
                            <h4 ng-bind="msToTime(hist.totalRunningTime)">
                              
                            </h4>
                            <p><b>Total Running Time</b>
                                
                            </p>
                            
                        </div>
                       <div class="icon">
                            <i class="ion ion-clock"></i>
                        </div>
                    </div>
                            
                     <div class="small-box bg-red">
                        <div class="inner">
                            <h4 ng-bind="msToTime(hist.totalParkedTime)">
                                
                            </h4>
                            <p><b>Total Parked Time</b>
                                
                            </p>
                            
                        </div>
                       <div class="icon">
                            <i class="ion ion-clock"></i>
                        </div>
                    </div>

                    <div class="small-box bg-dark-gray">
                     	<div class="inner">
                     		<h4 ng-bind="msToTime(hist.totalIdleTime)"></h4>
                     		<p><b>Total idle time</b></p>
                     	</div>
                    	<div class="icon">
                    		<i class="ion ion-clock"></i>
                    	</div>
                    </div>   
                     <div class="small-box bg-blue">
                        <div class="inner">
                            <h4 ng-bind="hist.parkingCount">
                                
                            </h4>
                            <p><b>No. of Parkings</b>
                                
                            </p>
                            
                        </div>
                       <div class="icon">
                            <i class="ion ion-clock"></i>
                        </div>
                    </div>
                    <div class="small-box bg-aqua">
                    	<div class="inner">
                    		<h4 ng-bind="msToTime(hist.totalNoDataTime)"></h4>
                     		<p><b>No data time</b></p>
                    	</div>
                    	<div class="icon">
                    		<i class="ion ion-clock"></i>
                    	</div>
                    </div>
		        </div>
		    </div>	
        </div>
       
    <script src="assets/js/static.js"></script>        
	<script src="assets/js/jquery-1.11.0.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.min.js"></script> 
    <script data-require="angular-ui-bootstrap@0.11.0" data-semver="0.11.0" src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
    <script src="../app/views/reports/customjs/ui-bootstrap-tpls-0.12.0.min.js"></script>
    <script src="assets/js/highcharts.js"></script>
    <script src="../app/views/reports/customjs/moment.js"></script>
    <script src="../app/views/reports/customjs/FileSaver.js"></script>
    <script src="../app/views/reports/customjs/html5csv.js"></script>
    <script src="../app/views/reports/datepicker/bootstrap-datetimepicker.js"></script>
    <script src="../app/views/reports/datatable/jquery.dataTables.js"></script>
    <script src="assets/js/vamoApp.js"></script>
    
    <script src="../app/views/reports/customjs/history.js"></script>
	
	

	<script>
	   
		

	    
	    $("#example1").dataTable();
	      
		$("#menu-toggle").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
		});
		
        $(function () {
                $('#dateFrom, #dateTo').datetimepicker({
					format:'YYYY-MM-DD',
					useCurrent:true,
					pickTime: false
				});
				$('#timeFrom').datetimepicker({
					pickDate: false
				});
				$('#timeTo').datetimepicker({
					useCurrent:true,
					pickDate: false
				});
        });      
    </script>
    <style>
    	.alig{
    		style="text-align:center; font-weight: bold;"
    	}
    </style>
</body>
</html>

